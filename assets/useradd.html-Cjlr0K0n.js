import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as e,b as n}from"./app-D3p8wuGf.js";const i={},l=n(`<h1 id="useradd" tabindex="-1"><a class="header-anchor" href="#useradd"><span>useradd</span></a></h1><p>创建的新的系统用户</p><h2 id="补充说明" tabindex="-1"><a class="header-anchor" href="#补充说明"><span>补充说明</span></a></h2><p><strong>useradd命令</strong> 用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在<code>/etc/passwd</code>文本文件中。</p><p>在Slackware中，adduser指令是个script程序，利用交谈的方式取得输入的用户帐号资料，然后再交由真正建立帐号的useradd命令建立新用户，如此可方便管理员建立用户帐号。在Red Hat Linux中， <strong>adduser命令</strong> 则是useradd命令的符号连接，两者实际上是同一个指令。</p><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>useradd<span class="token punctuation">(</span>选项<span class="token punctuation">)</span><span class="token punctuation">(</span>参数<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="选项" tabindex="-1"><a class="header-anchor" href="#选项"><span>选项</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>-b, --base-dir BASE_DIR  <span class="token comment"># 如果未指定 -d HOME_DIR，则系统的默认基本目录。如果未指定此选项，useradd 将使用 /etc/default/useradd 中的 HOME 变量指定的基本目录，或默认使用 /home。</span>
-c, <span class="token parameter variable">--comment</span> COMMENT    <span class="token comment"># 加上备注文字。任何文本字符串。它通常是对登录名的简短描述，目前用作用户全名的字段。</span>
-d, <span class="token parameter variable">--home</span> HOME_DIR      <span class="token comment"># 将使用 HOME_DIR 作为用户登录目录的值来创建新用户。 </span>
-D, <span class="token parameter variable">--defaults</span>           <span class="token comment"># 变更预设值。</span>
-e, <span class="token parameter variable">--expiredate</span> EXPIRE_DATE <span class="token comment"># 用户帐户将被禁用的日期。 日期以 YYYY-MM-DD 格式指定。</span>
-f, <span class="token parameter variable">--inactive</span> INACTIVE      <span class="token comment"># 密码过期后到帐户被永久禁用的天数。</span>
-g, <span class="token parameter variable">--gid</span> GROUP   <span class="token comment"># 用户初始登录组的组名或编号。组名必须存在。组号必须引用已经存在的组。</span>
-G, <span class="token parameter variable">--groups</span> GROUP1<span class="token punctuation">[</span>,GROUP2,<span class="token punctuation">..</span>.<span class="token punctuation">[</span>,GROUPN<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token comment"># 用户也是其成员的补充组列表。每个组用逗号隔开，中间没有空格。</span>
-h, <span class="token parameter variable">--help</span> <span class="token comment"># 显示帮助信息并退出。</span>
-k, <span class="token parameter variable">--skel</span> SKEL_DIR <span class="token comment"># 骨架目录，其中包含要在用户的主目录中复制的文件和目录，当主目录由 useradd 创建时。</span>
-K, <span class="token parameter variable">--key</span> <span class="token assign-left variable">KEY</span><span class="token operator">=</span>VALUE <span class="token comment"># 覆盖 /etc/login.defs 默认值（UID_MIN、UID_MAX、UMASK、PASS_MAX_DAYS 等）。</span>
-l, --no-log-init   <span class="token comment"># 不要将用户添加到 lastlog 和 faillog 数据库。</span>
-m, --create-home   <span class="token comment"># 如果用户的主目录不存在，则创建它。</span>
<span class="token parameter variable">-M</span>                  <span class="token comment"># 不要创建用户的主目录，即使 /etc/login.defs (CREATE_HOME) 中的系统范围设置设置为 yes。</span>
-N, --no-user-group <span class="token comment"># 不要创建与用户同名的组，而是将用户添加到由 -g 选项或 /etc/default/useradd 中的 GROUP 变量指定的组中。</span>
-o, --non-unique    <span class="token comment"># 允许创建具有重复（非唯一）UID 的用户帐户。 此选项仅在与 -o 选项结合使用时有效。</span>
-p, <span class="token parameter variable">--password</span> PASSWORD <span class="token comment"># crypt(3) 返回的加密密码。 默认是禁用密码。</span>
-r, <span class="token parameter variable">--system</span>        <span class="token comment"># 创建一个系统帐户。</span>
-s, <span class="token parameter variable">--shell</span> <span class="token environment constant">SHELL</span>   <span class="token comment"># 用户登录 shell 的名称。</span>
-u, <span class="token parameter variable">--uid</span> <span class="token environment constant">UID</span>       <span class="token comment"># 用户 ID 的数值。</span>
-U, --user-group    <span class="token comment"># 创建一个与用户同名的组，并将用户添加到该组。</span>
-Z, --selinux-user SEUSER <span class="token comment"># 用户登录的 SELinux 用户。 默认情况下将此字段留空，这会导致系统选择默认的 SELinux 用户。</span>

<span class="token comment"># 更改默认值</span>
<span class="token comment"># 当仅使用 -D 选项调用时，useradd 将显示当前默认值。 当使用 -D 和其他选项调用时，useradd 将更新指定选项的默认值。 有效的默认更改选项是：</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h3><p>用户名：要创建的用户名。</p><h3 id="退出值" tabindex="-1"><a class="header-anchor" href="#退出值"><span>退出值</span></a></h3><p><code>useradd</code> 命令以以下值退出：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token number">0</span> 成功
<span class="token number">1</span> 无法更新密码文件
<span class="token number">2</span> 无效的命令语法
<span class="token number">3</span> 选项的无效参数
<span class="token number">4</span> <span class="token environment constant">UID</span> 已经在使用（并且没有 -o）
<span class="token number">6</span> 指定的组不存在
<span class="token number">9</span> 用户名已被使用
<span class="token number">10</span> 无法更新组文件
<span class="token number">12</span> 无法创建主目录
<span class="token number">13</span> 无法创建邮件假脱机
<span class="token number">14</span> 无法更新 SELinux 用户映射
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="文件" tabindex="-1"><a class="header-anchor" href="#文件"><span>文件</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>/etc/passwd <span class="token comment"># 用户帐户信息。</span>
/etc/shadow <span class="token comment"># 保护用户帐户信息。</span>
/etc/group  <span class="token comment"># 组帐户信息。</span>
/etc/gshadow <span class="token comment"># 保护组帐户信息。</span>
/etc/default/useradd <span class="token comment"># 帐户创建的默认值。</span>
/etc/skel/                                 <span class="token comment"># 包含默认文件的目录。</span>
/etc/login.defs <span class="token comment"># 影子密码套件配置。</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h3><p>新建用户加入组：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">useradd</span> –g sales jack –G company,employees    <span class="token comment"># -g：加入主要组、-G：加入次要组</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>建立一个新用户账户，并设置ID：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">useradd</span> caojh <span class="token parameter variable">-u</span> <span class="token number">544</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>需要说明的是，设定ID值时尽量要大于500，以免冲突。因为Linux安装后会建立一些特殊用户，一般0到499之间的值留给bin、mail这样的系统账号。</p><p>新建一个普通用户：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">useradd</span> lutixia
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>新建一个系统用户,系统用户一般用于管理服务，无需登录，所以分配nologin，限制其登录系统：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">useradd</span> <span class="token parameter variable">-r</span> <span class="token parameter variable">-s</span> /sbin/nologin mq
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>修改创建用户的默认参数，设置密码过期后到永久禁用的不活动时间为30天:</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">useradd</span> <span class="token parameter variable">-D</span> <span class="token parameter variable">-f</span> <span class="token number">30</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,28),t=[l];function d(r,c){return s(),e("div",null,t)}const m=a(i,[["render",d],["__file","useradd.html.vue"]]),u=JSON.parse('{"path":"/command/linux/useradd.html","title":"useradd","lang":"zh-CN","frontmatter":{"description":"useradd 创建的新的系统用户 补充说明 useradd命令 用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在/etc/passwd文本文件中。 在Slackware中，adduser指令是个scrip...","head":[["meta",{"property":"og:url","content":"https://baymaxcoding.github.io/command/linux/useradd.html"}],["meta",{"property":"og:site_name","content":"BaymaxCoding"}],["meta",{"property":"og:title","content":"useradd"}],["meta",{"property":"og:description","content":"useradd 创建的新的系统用户 补充说明 useradd命令 用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在/etc/passwd文本文件中。 在Slackware中，adduser指令是个scrip..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-12T04:24:50.000Z"}],["meta",{"property":"article:author","content":"BaymaxCoding"}],["meta",{"property":"article:modified_time","content":"2024-04-12T04:24:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"useradd\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-12T04:24:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"BaymaxCoding\\",\\"url\\":\\"https://baymaxcoding.github.io/\\"}]}"]]},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"退出值","slug":"退出值","link":"#退出值","children":[]},{"level":3,"title":"文件","slug":"文件","link":"#文件","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"git":{"createdTime":1712895890000,"updatedTime":1712895890000,"contributors":[{"name":"BaymaxCoding","email":"BRemail2324996822@163.com","commits":1}]},"readingTime":{"minutes":3.87,"words":1162},"filePathRelative":"command/linux/useradd.md","localizedDate":"2024年4月12日","autoDesc":true}');export{m as comp,u as data};
