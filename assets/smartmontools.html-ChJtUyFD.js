import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as n,e}from"./app-D_HUMAmc.js";const t={},l=e(`<h1 id="smartmontools" tabindex="-1"><a class="header-anchor" href="#smartmontools"><span>smartmontools</span></a></h1><p>Smartmontools 是一种硬盘检测工具，通过控制和管理硬盘的SMART（Self Monitoring Analysis and Reporting Technology，自动检测分析及报告技术）技术来实现的</p><p>##安装</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">aptitude</span> <span class="token function">install</span> smartmontools
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>smartctl <span class="token punctuation">(</span>选项<span class="token punctuation">)</span> <span class="token punctuation">(</span>参数<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="选项" tabindex="-1"><a class="header-anchor" href="#选项"><span>选项</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token parameter variable">-i</span> <span class="token operator">&lt;</span>硬盘<span class="token operator">&gt;</span> 显示硬盘设备的标识信息
<span class="token parameter variable">-a</span> <span class="token operator">&lt;</span>硬盘<span class="token operator">&gt;</span> 显示设备的所有SMART信息
<span class="token parameter variable">-H</span> <span class="token operator">&lt;</span>硬盘<span class="token operator">&gt;</span> 显示设备的健康信息
<span class="token parameter variable">-A</span> <span class="token operator">&lt;</span>硬盘<span class="token operator">&gt;</span> 显示设备SMART供应商特定的属性和值
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h2><p>硬盘设备：指定要查看的硬盘(可以使用 fdisk -l 获取有哪些硬盘设备)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~ <span class="token function">sudo</span> <span class="token function">fdisk</span> <span class="token parameter variable">-l</span>
设备          起点      末尾      扇区   大小 类型
/dev/sda1     <span class="token number">2048</span>   <span class="token number">1050623</span>   <span class="token number">1048576</span>   512M EFI 系统
/dev/sda2  <span class="token number">1050624</span> <span class="token number">976771071</span> <span class="token number">975720448</span> <span class="token number">465</span>.3G Linux 文件系统
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h2><p>查看 /dev/sda1 硬盘的健康状态，在这个命令中，&quot;-s on&quot;标志开启指定设备上的SMART功能。如果/dev/sda上已开启SMART支持，那就省略它。<br> （PASSED 表示健康；FAILED 表示即将出现故障所以需要开始备份这块磁盘上的重要数据）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~ <span class="token function">sudo</span> smartctl <span class="token parameter variable">-s</span> on <span class="token parameter variable">-H</span> /dev/sda1   

<span class="token operator">==</span><span class="token operator">=</span> START OF READ SMART DATA SECTION <span class="token operator">==</span><span class="token operator">=</span>
SMART overall-health self-assessment <span class="token builtin class-name">test</span> result: PASSED
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看 /dev/sda1 硬盘特定的属性和值 (Power_On_Hours: 表示通电时长 18195 小时)</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~ <span class="token function">sudo</span> smartctl <span class="token parameter variable">-A</span> /dev/sda1

<span class="token operator">==</span><span class="token operator">=</span> START OF READ SMART DATA SECTION <span class="token operator">==</span><span class="token operator">=</span>
SMART Attributes Data Structure revision number: <span class="token number">16</span>
Vendor Specific SMART Attributes with Thresholds:
ID<span class="token comment"># ATTRIBUTE_NAME          FLAG     VALUE WORST THRESH TYPE      UPDATED  WHEN_FAILED RAW_VALUE</span>
  <span class="token number">3</span> Spin_Up_Time            0x0023   <span class="token number">100</span>   <span class="token number">100</span>   002    Pre-fail  Always       -       <span class="token number">1326</span>
  <span class="token number">4</span> Start_Stop_Count        0x0032   <span class="token number">100</span>   <span class="token number">100</span>   000    Old_age   Always       -       <span class="token number">3752</span>
  <span class="token number">9</span> Power_On_Hours          0x0032   055   055   000    Old_age   Always       -       <span class="token number">18195</span>
 <span class="token number">10</span> Spin_Retry_Count        0x0033   <span class="token number">174</span>   <span class="token number">100</span>   030    Pre-fail  Always       -       <span class="token number">0</span>
 <span class="token number">12</span> Power_Cycle_Count       0x0032   <span class="token number">100</span>   <span class="token number">100</span>   000    Old_age   Always       -       <span class="token number">3118</span>
<span class="token number">183</span> Runtime_Bad_Block       0x0032   <span class="token number">100</span>   <span class="token number">100</span>   001    Old_age   Always       -       <span class="token number">0</span>
<span class="token number">184</span> End-to-End_Error        0x0033   <span class="token number">100</span>   <span class="token number">100</span>   097    Pre-fail  Always       -       <span class="token number">0</span>
<span class="token number">185</span> Unknown_Attribute       0x0032   <span class="token number">100</span>   <span class="token number">100</span>   001    Old_age   Always       -       <span class="token number">65535</span>
<span class="token number">187</span> Reported_Uncorrect      0x0032   001   001   000    Old_age   Always       -       <span class="token number">134</span>
<span class="token number">188</span> Command_Timeout         0x0032   <span class="token number">100</span>   098   000    Old_age   Always       -       <span class="token number">48</span>
<span class="token number">191</span> G-Sense_Error_Rate      0x0032   <span class="token number">100</span>   <span class="token number">100</span>   000    Old_age   Always       -       <span class="token number">2850</span>
<span class="token number">192</span> Power-Off_Retract_Count 0x0022   <span class="token number">100</span>   <span class="token number">100</span>   000    Old_age   Always       -       <span class="token number">32047593</span>
<span class="token number">193</span> Load_Cycle_Count        0x0032   095   095   000    Old_age   Always       -       <span class="token number">51738</span>
<span class="token number">194</span> Temperature_Celsius     0x0022   060   055   040    Old_age   Always       -       <span class="token number">40</span> <span class="token punctuation">(</span>Min/Max <span class="token number">16</span>/44<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="以指定的间隔运行-同时又能通知硬盘的测试结果" tabindex="-1"><a class="header-anchor" href="#以指定的间隔运行-同时又能通知硬盘的测试结果"><span>以指定的间隔运行，同时又能通知硬盘的测试结果</span></a></h3><p>首先，编辑smartctl的配置文件(/etc/default/smartmontools)以便在系统启动时启动smartd，并以秒为单位指定间隔时间（如7200 = 2小时）</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token assign-left variable">start_smartd</span><span class="token operator">=</span>yes
<span class="token assign-left variable">smartd_opts</span><span class="token operator">=</span><span class="token string">&quot;--interval=7200&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>下一步，编辑smartd的配置文件（/etc/smartd.conf），添加以下行内容。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>/dev/sda <span class="token parameter variable">-m</span> myemail@mydomain.com <span class="token parameter variable">-M</span> <span class="token builtin class-name">test</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>选项说明 <br> -m ：指定发送测试报告到某个电子邮件地址。这里可以是系统用户比如root，或者如果服务器已经配置成发送电子邮件到系统外部，则是类似于 myemail@mydomain.com 的邮件地址。<br> -M ：指定发送邮件报告的期望类型。<br> once：为检测到的每种磁盘问题只发送一封警告邮件。<br> daily：为检测到的每种磁盘问题每隔一天发送一封额外的警告提醒邮件。<br> diminishing：为检测到的每种问题发送一封额外的警告提醒邮件，开始是每隔一天，然后每隔两天，每隔四天，以此类推。每个间隔是前一次间隔的2倍。<br> test：只要smartd一启动，立即发送一封测试邮件。<br> exec PATH：取代默认的邮件命令，运行PATH路径下的可执行文件。PATH必须指向一个可执行的二进制文件或脚本。当检测到一个问题时，可以指定执行一个期望的动作（闪烁控制台、关闭系统等等）。</p><p>保存改动并重启smartd。</p>`,23),o=[l];function r(i,p){return a(),n("div",null,o)}const m=s(t,[["render",r],["__file","smartmontools.html.vue"]]),u=JSON.parse('{"path":"/command/linux/smartmontools.html","title":"smartmontools","lang":"zh-CN","frontmatter":{"description":"smartmontools Smartmontools 是一种硬盘检测工具，通过控制和管理硬盘的SMART（Self Monitoring Analysis and Reporting Technology，自动检测分析及报告技术）技术来实现的 ##安装 语法 选项 参数 硬盘设备：指定要查看的硬盘(可以使用 fdisk -l 获取有哪些硬盘设备) 实...","head":[["meta",{"property":"og:url","content":"https://baymaxcoding.github.io/command/linux/smartmontools.html"}],["meta",{"property":"og:site_name","content":"BaymaxCoding"}],["meta",{"property":"og:title","content":"smartmontools"}],["meta",{"property":"og:description","content":"smartmontools Smartmontools 是一种硬盘检测工具，通过控制和管理硬盘的SMART（Self Monitoring Analysis and Reporting Technology，自动检测分析及报告技术）技术来实现的 ##安装 语法 选项 参数 硬盘设备：指定要查看的硬盘(可以使用 fdisk -l 获取有哪些硬盘设备) 实..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-12T04:24:50.000Z"}],["meta",{"property":"article:author","content":"BaymaxCoding"}],["meta",{"property":"article:modified_time","content":"2024-04-12T04:24:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"smartmontools\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-12T04:24:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"BaymaxCoding\\",\\"url\\":\\"https://baymaxcoding.github.io/\\"}]}"]]},"headers":[{"level":2,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":2,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":2,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":2,"title":"实例","slug":"实例","link":"#实例","children":[{"level":3,"title":"以指定的间隔运行，同时又能通知硬盘的测试结果","slug":"以指定的间隔运行-同时又能通知硬盘的测试结果","link":"#以指定的间隔运行-同时又能通知硬盘的测试结果","children":[]}]}],"git":{"createdTime":1712895890000,"updatedTime":1712895890000,"contributors":[{"name":"BaymaxCoding","email":"BRemail2324996822@163.com","commits":1}]},"readingTime":{"minutes":2.85,"words":855},"filePathRelative":"command/linux/smartmontools.md","localizedDate":"2024年4月12日","autoDesc":true}');export{m as comp,u as data};
