import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as n,c as a,e}from"./app-D_HUMAmc.js";const l={},p=e(`<h1 id="skill" tabindex="-1"><a class="header-anchor" href="#skill"><span>skill</span></a></h1><p>向选定的进程发送信号冻结进程</p><h2 id="补充说明" tabindex="-1"><a class="header-anchor" href="#补充说明"><span>补充说明</span></a></h2><p><strong>skill命令</strong> 用于向选定的进程发送信号，冻结进程。这个命令初学者并不常用，深入之后牵涉到系统服务优化之后可能会用到。</p><h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill<span class="token punctuation">(</span>选项<span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="选项" tabindex="-1"><a class="header-anchor" href="#选项"><span>选项</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>-f：快速模式；
-i：交互模式，每一步操作都需要确认；
-v：冗余模式；
-w：激活模式；
-V：显示版本号；
-t：指定开启进程的终端号；
-u：指定开启进程的用户；
-p：指定进程的id号；
-c：指定开启进程的指令名称。
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h3><p>如果您发现了一个占用大量CPU和内存的进程，但又不想停止它，该怎么办？考虑下面的top命令输出：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token function">top</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-p</span> <span class="token number">16514</span>
<span class="token number">23</span>:00:44  up <span class="token number">12</span> days,  <span class="token number">2</span>:04,  <span class="token number">4</span> users,  load average: <span class="token number">0.47</span>, <span class="token number">0.35</span>, <span class="token number">0.31</span>
<span class="token number">1</span> processes: <span class="token number">1</span> sleeping, <span class="token number">0</span> running, <span class="token number">0</span> zombie, <span class="token number">0</span> stopped
CPU states:  cpu    user    <span class="token function">nice</span>  system    irq  softirq  iowait    idle
           total    <span class="token number">0.0</span>%    <span class="token number">0.6</span>%    <span class="token number">8.7</span>%   <span class="token number">2.2</span>%     <span class="token number">0.0</span>%   <span class="token number">88.3</span>%    <span class="token number">0.0</span>%
Mem:  1026912k av, 1010476k used,   16436k free,       0k shrd,   52128k buff
                    766724k actv,  143128k in_d,   14264k in_c
Swap: 2041192k av,   83160k used, 1958032k <span class="token function">free</span>                  799432k cached

  PID <span class="token environment constant">USER</span>     PRI  NI  SIZE  RSS SHARE <span class="token function">stat</span> %CPU %MEM   <span class="token function">time</span> CPU <span class="token builtin class-name">command</span>
<span class="token number">16514</span> oracle    <span class="token number">19</span>   <span class="token number">4</span> <span class="token number">28796</span>  26M <span class="token number">20252</span> D N   <span class="token number">7.0</span>  <span class="token number">2.5</span>   <span class="token number">0</span>:03   <span class="token number">0</span> oraclePRODB2<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>既然您确认进程16514占用了大量内存，您就可以使用skill命令“冻结”它，而不是停止它。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-STOP</span> <span class="token number">1</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>之后，检查top输出：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token number">23</span>:01:11  up <span class="token number">12</span> days,  <span class="token number">2</span>:05,  <span class="token number">4</span> users,  load average: <span class="token number">1.20</span>, <span class="token number">0.54</span>, <span class="token number">0.38</span>
<span class="token number">1</span> processes: <span class="token number">0</span> sleeping, <span class="token number">0</span> running, <span class="token number">0</span> zombie, <span class="token number">1</span> stopped
CPU states:  cpu    user    <span class="token function">nice</span>  system    irq  softirq  iowait    idle
           total    <span class="token number">2.3</span>%    <span class="token number">0.0</span>%    <span class="token number">0.3</span>%   <span class="token number">0.0</span>%     <span class="token number">0.0</span>%    <span class="token number">2.3</span>%   <span class="token number">94.8</span>%
Mem:  1026912k av, 1008756k used,   18156k free,       0k shrd,    3976k buff
                    770024k actv,  143496k in_d,   12876k in_c
Swap: 2041192k av,   83152k used, 1958040k <span class="token function">free</span>                  851200k cached

  PID <span class="token environment constant">USER</span>     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND
<span class="token number">16514</span> oracle    <span class="token number">19</span>   <span class="token number">4</span> <span class="token number">28796</span>  26M <span class="token number">20252</span> T N   <span class="token number">0.0</span>  <span class="token number">2.5</span>   <span class="token number">0</span>:04   <span class="token number">0</span> oraclePRODB2<span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，CPU 从 0% 空闲变为 94% 空闲。该进程被有效冻结。过一段时间之后，您可能希望唤醒该进程：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-CONT</span> <span class="token number">16514</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如果希望暂时冻结进程以便为完成更重要的进程腾出空间，该方法非常有用。</p><p>此命令用途很广。如果您要停止 &quot;oracle&quot; 用户的所有进程，只需要一个命令即可实现：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-STOP</span> oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>可以使用用户、PID、命令或终端 id 作为参数。以下命令可停止所有 rman 命令。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-STOP</span> rman
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>如您所见，skill 决定您输入的参数（进程 ID、用户 ID 或命令）并进行相应操作。这可能会导致在某些情况下出现这样的问题：您可能具有同名的用户和命令。最好的示例是 &quot;oracle&quot; 进程，通常由用户 &quot;oracle&quot; 运行。因此，当您希望停止名为 &quot;oracle&quot; 的进程时，可执行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-STOP</span> oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>用户 &quot;oracle&quot; 的所有进程都停止，包括您可能要使用的会话。要非常明确地执行命令，您可以选择使用一个新参数指定参数的类型。要停止一个名为 oracle 的命令，可执行以下命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>skill <span class="token parameter variable">-STOP</span> <span class="token parameter variable">-c</span> oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>snice命令的功能与skill类似。但它用于降低进程的优先级，而不是停止进程。首先，检查 top 输出：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>  PID <span class="token environment constant">USER</span>     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND
    <span class="token number">3</span> root      <span class="token number">15</span>   <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span> RW    <span class="token number">0.0</span>  <span class="token number">0.0</span>   <span class="token number">0</span>:00   <span class="token number">0</span> kapmd
<span class="token number">13680</span> oracle    <span class="token number">15</span>   <span class="token number">0</span> <span class="token number">11336</span>  10M  <span class="token number">8820</span> T     <span class="token number">0.0</span>  <span class="token number">1.0</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13683</span> oracle    <span class="token number">15</span>   <span class="token number">0</span>  <span class="token number">9972</span> <span class="token number">9608</span>  <span class="token number">7788</span> T     <span class="token number">0.0</span>  <span class="token number">0.9</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13686</span> oracle    <span class="token number">15</span>   <span class="token number">0</span>  <span class="token number">9860</span> <span class="token number">9496</span>  <span class="token number">7676</span> T     <span class="token number">0.0</span>  <span class="token number">0.9</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13689</span> oracle    <span class="token number">15</span>   <span class="token number">0</span> <span class="token number">10004</span> <span class="token number">9640</span>  <span class="token number">7820</span> T     <span class="token number">0.0</span>  <span class="token number">0.9</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13695</span> oracle    <span class="token number">15</span>   <span class="token number">0</span>  <span class="token number">9984</span> <span class="token number">9620</span>  <span class="token number">7800</span> T     <span class="token number">0.0</span>  <span class="token number">0.9</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13698</span> oracle    <span class="token number">15</span>   <span class="token number">0</span> <span class="token number">10064</span> <span class="token number">9700</span>  <span class="token number">7884</span> T     <span class="token number">0.0</span>  <span class="token number">0.9</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
<span class="token number">13701</span> oracle    <span class="token number">15</span>   <span class="token number">0</span> <span class="token number">22204</span>  21M <span class="token number">16940</span> T     <span class="token number">0.0</span>  <span class="token number">2.1</span>   <span class="token number">0</span>:00   <span class="token number">0</span> oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>现在，将 &quot;oracle&quot; 进程的优先级降低四个点。注意，该值越高，优先级越低。</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>snice +4 <span class="token parameter variable">-u</span> oracle
  PID <span class="token environment constant">USER</span>     PRI  NI  SIZE  RSS SHARE STAT %CPU %MEM   TIME CPU COMMAND
<span class="token number">16894</span> oracle    <span class="token number">20</span>   <span class="token number">4</span> <span class="token number">38904</span>  32M <span class="token number">26248</span> D N   <span class="token number">5.5</span>  <span class="token number">3.2</span>   <span class="token number">0</span>:01   <span class="token number">0</span> oracle
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>注意，NI 列（nice 值）现在是 4，优先级现在设置为 20，而不是 15。这对于降低优先级非常有帮助。</p>`,31),t=[p];function r(i,c){return n(),a("div",null,t)}const m=s(l,[["render",r],["__file","skill.html.vue"]]),d=JSON.parse('{"path":"/command/linux/skill.html","title":"skill","lang":"zh-CN","frontmatter":{"description":"skill 向选定的进程发送信号冻结进程 补充说明 skill命令 用于向选定的进程发送信号，冻结进程。这个命令初学者并不常用，深入之后牵涉到系统服务优化之后可能会用到。 语法 选项 实例 如果您发现了一个占用大量CPU和内存的进程，但又不想停止它，该怎么办？考虑下面的top命令输出： 既然您确认进程16514占用了大量内存，您就可以使用skill命令...","head":[["meta",{"property":"og:url","content":"https://baymaxcoding.github.io/command/linux/skill.html"}],["meta",{"property":"og:site_name","content":"BaymaxCoding"}],["meta",{"property":"og:title","content":"skill"}],["meta",{"property":"og:description","content":"skill 向选定的进程发送信号冻结进程 补充说明 skill命令 用于向选定的进程发送信号，冻结进程。这个命令初学者并不常用，深入之后牵涉到系统服务优化之后可能会用到。 语法 选项 实例 如果您发现了一个占用大量CPU和内存的进程，但又不想停止它，该怎么办？考虑下面的top命令输出： 既然您确认进程16514占用了大量内存，您就可以使用skill命令..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-12T04:24:50.000Z"}],["meta",{"property":"article:author","content":"BaymaxCoding"}],["meta",{"property":"article:modified_time","content":"2024-04-12T04:24:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"skill\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-12T04:24:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"BaymaxCoding\\",\\"url\\":\\"https://baymaxcoding.github.io/\\"}]}"]]},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"git":{"createdTime":1712895890000,"updatedTime":1712895890000,"contributors":[{"name":"BaymaxCoding","email":"BRemail2324996822@163.com","commits":1}]},"readingTime":{"minutes":3.39,"words":1018},"filePathRelative":"command/linux/skill.md","localizedDate":"2024年4月12日","autoDesc":true}');export{m as comp,d as data};
