import{_ as p}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as l,o,c as r,a as n,d as s,e,b as t}from"./app-CHACLx4z.js";const c={},i=t('<h1 id="modetest" tabindex="-1"><a class="header-anchor" href="#modetest"><span>modetest</span></a></h1><p>DRM/KMS驱动程序libdrm中的模式测试工具</p><h2 id="补充说明" tabindex="-1"><a class="header-anchor" href="#补充说明"><span>补充说明</span></a></h2><p><code>modetest</code> 是一个用于测试和验证 DRM（Direct Rendering Manager）驱动程序功能的命令行工具。</p><h3 id="安装" tabindex="-1"><a class="header-anchor" href="#安装"><span>安装</span></a></h3>',5),d=n("strong",null,"源码",-1),m={href:"https://gitlab.freedesktop.org/mesa/drm",target:"_blank",rel:"noopener noreferrer"},u=n("strong",null,"下载",-1),b={href:"https://dri.freedesktop.org/libdrm/",target:"_blank",rel:"noopener noreferrer"},k=t(`<p><strong>编译</strong></p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/opt/ <span class="token parameter variable">--host</span><span class="token operator">=</span>aarch64-linux-gnu
<span class="token function">make</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span>
<span class="token comment">## 编译删除</span>
<span class="token function">make</span> distclean
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,2),v=n("strong",null,"参考",-1),h={href:"https://www.jianshu.com/p/a9152ca3e7ab",target:"_blank",rel:"noopener noreferrer"},g=t(`<h3 id="语法" tabindex="-1"><a class="header-anchor" href="#语法"><span>语法</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>modetest <span class="token punctuation">[</span>选项<span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="选项" tabindex="-1"><a class="header-anchor" href="#选项"><span>选项</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 查询选项</span>
<span class="token parameter variable">-c</span>      列出连接器
<span class="token parameter variable">-e</span>      列出编码器
<span class="token parameter variable">-f</span>      列出帧缓冲
<span class="token parameter variable">-p</span>      列出 CRTCs 和平面

<span class="token comment"># 测试选项</span>
<span class="token parameter variable">-P</span> <span class="token operator">&lt;</span>plane_id<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>crtc_id<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>w<span class="token operator">&gt;</span>x<span class="token operator">&lt;</span>h<span class="token operator">&gt;</span><span class="token punctuation">[</span>+<span class="token operator">&lt;</span>x<span class="token operator">&gt;</span>+<span class="token operator">&lt;</span>y<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>*<span class="token operator">&lt;</span>scale<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>format<span class="token operator">&gt;</span><span class="token punctuation">]</span>   设置一个平面
<span class="token parameter variable">-s</span> <span class="token operator">&lt;</span>connector_id<span class="token operator">&gt;</span><span class="token punctuation">[</span>,<span class="token operator">&lt;</span>connector_id<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>crtc_id<span class="token operator">&gt;</span><span class="token punctuation">]</span>:<span class="token operator">&lt;</span>mode<span class="token operator">&gt;</span><span class="token punctuation">[</span>-<span class="token operator">&lt;</span>vrefresh<span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token punctuation">[</span>@<span class="token operator">&lt;</span>format<span class="token operator">&gt;</span><span class="token punctuation">]</span>   设置一个显示模式
<span class="token parameter variable">-C</span>      测试硬件光标
<span class="token parameter variable">-v</span>      测试垂直同步页面翻转
<span class="token parameter variable">-w</span> <span class="token operator">&lt;</span>obj_id<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>prop_name<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>value<span class="token operator">&gt;</span>   设置属性

<span class="token comment"># 通用选项</span>
<span class="token parameter variable">-a</span>      启用原子模式设置
<span class="token parameter variable">-d</span>      在模式设置后放弃主控权限
<span class="token parameter variable">-M</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>      指定要使用的驱动程序模块
<span class="token parameter variable">-D</span> <span class="token operator">&lt;</span>device<span class="token operator">&gt;</span>      指定要使用的设
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="参数" tabindex="-1"><a class="header-anchor" href="#参数"><span>参数</span></a></h3><p><code>&lt;modele&gt;</code> 驱动模块</p><ul><li>i915：Intel 集成显卡驱动模块</li><li>amdgpu：AMD Radeon 显卡驱动模块</li><li>radeon：旧版 AMD Radeon 显卡驱动模块</li><li>nouveau：NVIDIA 开源显卡驱动模块</li><li>vmwgfx：VMware 显卡驱动模块</li><li>omapdrm：TI OMAP 显卡驱动模块</li><li>exynos：三星 Exynos 显卡驱动模块</li><li>tilcdc：TI LCD 控制器显卡驱动模块</li><li>msm：Qualcomm MSM 显卡驱动模块</li><li>sti：STMicroelectronics 显卡驱动模块</li><li>tegra：NVIDIA Tegra 显卡驱动模块</li><li>imx-drm：Freescale i.MX 显卡驱动模块</li><li>rockchip：Rockchip 显卡驱动模块</li></ul><h3 id="实例" tabindex="-1"><a class="header-anchor" href="#实例"><span>实例</span></a></h3><p>使用 <code>modetest</code> 查看相关信息</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~<span class="token comment"># modetest</span>
Encoders:  <span class="token comment"># 省略了好多好多</span>
<span class="token function">id</span>      crtc    <span class="token builtin class-name">type</span>    possible crtcs  possible clones
<span class="token number">194</span>     <span class="token number">0</span>       Virtual 0x0000000f      0x00000001
<span class="token number">196</span>     <span class="token number">88</span>      TMDS    0x00000002      0x00000002
<span class="token number">210</span>     <span class="token number">0</span>       DSI     0x00000004      0x00000004
<span class="token number">213</span>     <span class="token number">0</span>       TMDS    0x00000001      0x00000008

Connectors:  <span class="token comment"># 省略了好多好多</span>
<span class="token function">id</span>      encoder status          name            size <span class="token punctuation">(</span>mm<span class="token punctuation">)</span>       modes   encoders
<span class="token number">197</span>     <span class="token number">196</span>     connected       HDMI-A-1        530x300         <span class="token number">10</span>      <span class="token number">196</span>
  mode <span class="token comment"># 巴拉巴拉非常多的一大串</span>
<span class="token number">211</span>     <span class="token number">210</span>     connected       DSI-1           184x114         <span class="token number">1</span>       <span class="token number">210</span>
<span class="token number">214</span>     <span class="token number">0</span>       disconnected    DP-1            0x0             <span class="token number">0</span>       <span class="token number">213</span>

CRTCs:  <span class="token comment"># 省略了好多好多****</span>
<span class="token function">id</span>      fb      pos     size
<span class="token number">68</span>      <span class="token number">0</span>       <span class="token punctuation">(</span><span class="token number">0,0</span><span class="token punctuation">)</span>   <span class="token punctuation">(</span>0x0<span class="token punctuation">)</span>
  <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> flags: <span class="token punctuation">;</span> type:
<span class="token number">88</span>      <span class="token number">0</span>       <span class="token punctuation">(</span><span class="token number">0,0</span><span class="token punctuation">)</span>   <span class="token punctuation">(</span>0x0<span class="token punctuation">)</span>
   <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> flags: <span class="token punctuation">;</span> type:
<span class="token number">108</span>     <span class="token number">219</span>     <span class="token punctuation">(</span><span class="token number">0,0</span><span class="token punctuation">)</span>   <span class="token punctuation">(</span>1200x1920<span class="token punctuation">)</span>
  1200x1920 <span class="token number">60</span> <span class="token number">1200</span> <span class="token number">1280</span> <span class="token number">1284</span> <span class="token number">1344</span> <span class="token number">1920</span> <span class="token number">1955</span> <span class="token number">1956</span> <span class="token number">1981</span> <span class="token number">159400</span> flags: <span class="token punctuation">;</span> type:
<span class="token number">128</span>     <span class="token number">0</span>       <span class="token punctuation">(</span><span class="token number">0,0</span><span class="token punctuation">)</span>   <span class="token punctuation">(</span>0x0<span class="token punctuation">)</span>
   <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> <span class="token number">0</span> flags: <span class="token punctuation">;</span> type:

Planes: <span class="token comment"># 省略了好多好多</span>
<span class="token function">id</span>      crtc    fb      CRTC x,y        x,y     gamma size      possible crtcs
<span class="token number">54</span>      <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0,0</span>             <span class="token number">0,0</span>     <span class="token number">0</span>               0x0000000f
  formats: XR24 AR24 XB24 AB24 RG24 BG24 RG16 BG16 NV12 NV21 NV16 NV61 NV24 NV42 NV15 NV20 NV30 YVYU VYUY YUYV UYVY
<span class="token number">74</span>      <span class="token number">0</span>       <span class="token number">0</span>       <span class="token number">0,0</span>             <span class="token number">0,0</span>     <span class="token number">0</span>               0x0000000f
  formats: XR24 AR24 XB24 AB24 RG24 BG24 RG16 BG16 NV12 NV21 NV16 NV61 NV24 NV42 NV15 NV20 NV30 YVYU VYUY YUYV UYVY
<span class="token number">94</span>      <span class="token number">108</span>     <span class="token number">219</span>     <span class="token number">0,0</span>             <span class="token number">0,0</span>     <span class="token number">0</span>               0x0000000f
  formats: XR24 AR24 XB24 AB24 RG24 BG24 RG16 BG16 NV12 NV21 NV16 NV61 NV24 NV42 NV15 NV20 NV30 YVYU VYUY YUYV UYVY

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><hr><p>根据以上信息在 <code>MIPI-DSI</code> 显示设备上使用 <code>Rockchip</code> 显卡驱动测试</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~<span class="token comment"># modetest -M rockchip -s 211@108:1200x1920 -v</span>
freq: <span class="token number">59</span>.90Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
freq: <span class="token number">59</span>.87Hz
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>MIPI</code> 屏幕上将会看到闪烁的彩色块。</p><hr><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>~<span class="token comment"># modetest -M rockchip -s 211@108:1200x1920 -C</span>
setting mode 1200x1920-60Hz@XR24 on connectors <span class="token number">211</span>, crtc <span class="token number">108</span>
starting cursor
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在 <code>MIPI</code> 屏幕上将会看到静止的彩色块。</p>`,17);function f(x,V){const a=l("ExternalLinkIcon");return o(),r("div",null,[i,n("ul",null,[n("li",null,[d,s("："),n("a",m,[s("Mesa / drm · GitLab"),e(a)])]),n("li",null,[u,s("："),n("a",b,[s("Index of /libdrm (dri.freedesktop.org)"),e(a)])])]),k,n("p",null,[v,s("："),n("a",h,[s("libdrm调试准备 - 简书"),e(a)])]),g])}const M=p(c,[["render",f],["__file","modetest.html.vue"]]),R=JSON.parse('{"path":"/command/linux/modetest.html","title":"modetest","lang":"zh-CN","frontmatter":{"description":"modetest DRM/KMS驱动程序libdrm中的模式测试工具 补充说明 modetest 是一个用于测试和验证 DRM（Direct Rendering Manager）驱动程序功能的命令行工具。 安装 源码：Mesa / drm · GitLab 下载：Index of /libdrm (dri.freedesktop.org) 编译 参考：...","head":[["meta",{"property":"og:url","content":"https://baymaxcoding.github.io/command/linux/modetest.html"}],["meta",{"property":"og:site_name","content":"BaymaxCoding"}],["meta",{"property":"og:title","content":"modetest"}],["meta",{"property":"og:description","content":"modetest DRM/KMS驱动程序libdrm中的模式测试工具 补充说明 modetest 是一个用于测试和验证 DRM（Direct Rendering Manager）驱动程序功能的命令行工具。 安装 源码：Mesa / drm · GitLab 下载：Index of /libdrm (dri.freedesktop.org) 编译 参考：..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-04-12T04:24:50.000Z"}],["meta",{"property":"article:author","content":"BaymaxCoding"}],["meta",{"property":"article:modified_time","content":"2024-04-12T04:24:50.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"modetest\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-04-12T04:24:50.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"BaymaxCoding\\",\\"url\\":\\"https://baymaxcoding.github.io/\\"}]}"]]},"headers":[{"level":2,"title":"补充说明","slug":"补充说明","link":"#补充说明","children":[{"level":3,"title":"安装","slug":"安装","link":"#安装","children":[]},{"level":3,"title":"语法","slug":"语法","link":"#语法","children":[]},{"level":3,"title":"选项","slug":"选项","link":"#选项","children":[]},{"level":3,"title":"参数","slug":"参数","link":"#参数","children":[]},{"level":3,"title":"实例","slug":"实例","link":"#实例","children":[]}]}],"git":{"createdTime":1712895890000,"updatedTime":1712895890000,"contributors":[{"name":"BaymaxCoding","email":"BRemail2324996822@163.com","commits":1}]},"readingTime":{"minutes":2.58,"words":773},"filePathRelative":"command/linux/modetest.md","localizedDate":"2024年4月12日","autoDesc":true}');export{M as comp,R as data};
